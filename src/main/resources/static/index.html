<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>胡橘</title>
    <link rel="icon" href="/images/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="css/hexagons.css">

</head>
<body>
    <script src="/js/jquery.min.js" type="text/javascript"></script>

<ul id="images">

</ul>
<script>
    var batch = 5;
    function loadMore(num){
        var html='';
        var a = $('li').length+1;
        console.log('a='+a);
        for(var i=a;i<=a+num;i++){
            var str =  '<li class="hex"><a target="_blank" class="hexIn" href="'+i+'.jpg"><img src="'+i+'.jpg" alt="" /> <h1>胡橘</h1><p>胡橘</p> </a> </li>';
            html+=str;
        }
        $('#images').append(html);
    }
    // document.body.onscroll=function(){
    //     var sum = this.scrollHeight;
    //     console.log('scroll:'+sum);
    //     if (sum <= $(this).scrollTop() + $(this).height()) {
    //         loadMore(10);
    //     }
    // };
    // $("body").unbind("scroll").bind("scroll", function (e) {
    //
    // });
    loadMore(batch);

    var isbool=true;//触发开关，防止多次调用事件

    $(window).scroll(function() {
        if (($(this).scrollTop() + $(window).height()) >= $(document).height() && isbool==true) {
            isbool=false;
            console.log('scroll:');
            loadMore(batch);
        }
    });



</script>

</body>
</html>